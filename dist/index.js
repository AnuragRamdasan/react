"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("react"),t=require("@shopify/polaris");class j{constructor({appId:r,apiKey:m,customerApiToken:u,apiUrl:i="https://appapi.heymantle.com/v1"}){if(!r)throw new Error("MantleClient appId is required");if(typeof window<"u"&&m)throw new Error("MantleClient apiKey should never be used in the browser");if(!m&&!u)throw new Error("MantleClient one of apiKey or customerApiToken is required");this.appId=r,this.apiKey=m,this.customerApiToken=u,this.apiUrl=i}async mantleRequest({path:r,method:m="GET",body:u}){try{return await(await fetch(`${this.apiUrl}${r.startsWith("/")?"":"/"}${r}`,{method:m,headers:{"Content-Type":"application/json",Accept:"application/json","X-Mantle-App-Id":this.appId,...this.apiKey?{"X-Mantle-App-Api-Key":this.apiKey}:{},...this.customerApiToken?{"X-Mantle-Customer-Api-Token":this.customerApiToken}:{}},...u&&{body:JSON.stringify(u)}})).json()}catch(i){throw console.error(`[mantleRequest] ${r} error: ${i.message}`),i}}async identify({platformId:r,myshopifyDomain:m,platform:u="shopify",accessToken:i,name:s,email:p,customFields:f}){return await this.mantleRequest({path:"identify",method:"POST",body:{platformId:r,myshopifyDomain:m,platform:u,accessToken:i,name:s,email:p,customFields:f}})}async getCustomer(){return(await this.mantleRequest({path:"customer"})).customer}async subscribe({planId:r,planIds:m,discountId:u,returnUrl:i,billingProvider:s}){return await this.mantleRequest({path:"subscriptions",method:"POST",body:{planId:r,planIds:m,discountId:u,returnUrl:i,billingProvider:s}})}async cancelSubscription({cancelReason:r}={}){return await this.mantleRequest({path:"subscriptions",method:"DELETE",...r&&{body:{cancelReason:r}}})}async updateSubscription({id:r,cappedAmount:m}){return await this.mantleRequest({path:"subscriptions",method:"PUT",body:{id:r,cappedAmount:m}})}async sendUsageEvent({eventId:r,eventName:m,customerId:u,properties:i={}}){return await this.mantleRequest({path:"usage_events",method:"POST",body:{eventId:r,eventName:m,...u?{customerId:u}:{},properties:i}})}async sendUsageEvents({events:r}){return await this.mantleRequest({path:"usage_events",method:"POST",body:{events:r}})}}var Z={MantleClient:j};const q=e.createContext(),J=({feature:a,count:r=0})=>(a==null?void 0:a.type)==="boolean"?a.value:(a==null?void 0:a.type)==="limit"?r<a.value||a.value===-1:!1,K=({appId:a,customerApiToken:r,apiUrl:m="https://appapi.heymantle.com/v1",children:u})=>{const i=new Z.MantleClient({appId:a,customerApiToken:r,apiUrl:m}),[s,p]=e.useState(null),[f,T]=e.useState(!0),[P,L]=e.useState(null),Y=async()=>{try{T(!0);const S=await i.getCustomer();p(S)}catch(S){L(S)}finally{T(!1)}},A=async S=>{await i.sendUsageEvent(S)},I=async({planId:S,planIds:w,discountId:h,billingProvider:x,returnUrl:N})=>await i.subscribe({planId:S,planIds:w,discountId:h,billingProvider:x,returnUrl:N}),B=async()=>await i.cancelSubscription();e.useEffect(()=>{r&&Y()},[r]);const y=(s==null?void 0:s.plans)||[],k=s==null?void 0:s.subscription,C=k==null?void 0:k.plan;return e.createElement(q.Provider,{value:{customer:s,subscription:k,plans:y,loading:f,error:P,client:i,sendUsageEvent:A,subscribe:I,cancelSubscription:B,isFeatureEnabled:({featureKey:S,count:w=0})=>s!=null&&s.features[S]?J({feature:s.features[S],count:w}):!1,limitForFeature:({featureKey:S})=>s!=null&&s.features[S]&&C.features[S].type==="limit"?s.features[S].value:-1,refetch:async()=>{await Y()}}},u)},Q=()=>{const a=e.useContext(q);if(a===void 0)throw new Error("useMantle must be used within a MantleProvider");return a};var F=function(r){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),e.createElement("path",{fillRule:"evenodd",d:"M15.78 5.97a.75.75 0 0 1 0 1.06l-6.5 6.5a.75.75 0 0 1-1.06 0l-3.25-3.25a.75.75 0 1 1 1.06-1.06l2.72 2.72 5.97-5.97a.75.75 0 0 1 1.06 0Z"}))};F.displayName="CheckIcon";var V=function(r){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),e.createElement("path",{d:"M10.75 6.75a.75.75 0 0 0-1.5 0v2.5h-2.5a.75.75 0 0 0 0 1.5h2.5v2.5a.75.75 0 0 0 1.5 0v-2.5h2.5a.75.75 0 0 0 0-1.5h-2.5v-2.5Z"}))};V.displayName="PlusIcon";const $=a=>a.type==="boolean"&&a.value==!0||a.type==="limit"&&a.value!==0,ee=(a,r)=>$(r)-$(a)||a.name.localeCompare(r.name),te=(a="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:a,notation:"standard"}),M=(a,r="USD",m=!0)=>{let u=te(r).format(a);return m&&(u=u.replace(/\.00$/,"")),u},d={ANNUAL:"ANNUAL",EVERY_30_DAYS:"EVERY_30_DAYS"},o={Back:"Back",CurrentPlan:"Current plan",CustomPlans:"Custom plans",CustomPlansDescription:"Plans tailored to your specific needs",FreeTrialLength:"{{ trialDays }}-day free trial",Features:"Features",Month:"month",MonthShort:"mo",Monthly:"Monthly",Year:"year",YearShort:"yr",Yearly:"Yearly",MostPopular:"Most popular",Per:"/",Plans:"Plans",SelectPlan:"Select plan",SubscribeSuccessTitle:"Subscription successful",SubscribeSuccessBody:"Thanks for subscribing to our app!"},O=(a=d.EVERY_30_DAYS)=>{switch(a){case d.ANNUAL:return"year";case d.EVERY_30_DAYS:default:return"month"}},H=(a=d.EVERY_30_DAYS)=>{switch(a){case d.ANNUAL:return"yr";case d.EVERY_30_DAYS:default:return"mo"}},U=({interval:a=d.EVERY_30_DAYS,useShortFormPlanIntervals:r=!0})=>r?H(a):O(a),W=({plan:a,recommended:r=!1})=>e.createElement(t.BlockStack,null,e.createElement(t.InlineStack,{align:"space-between",gap:"100"},e.createElement(t.Text,{variant:"bodyLg"},a.name),r&&e.createElement(t.Badge,{tone:"success"},o.MostPopular)),a.description&&e.createElement(t.Text,{tone:"subdued"},a.description)),X=({plan:a,discount:r,useShortFormPlanIntervals:m=!0})=>e.createElement(t.BlockStack,{gap:"100"},!!r&&e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},M(r.discountedAmount,a.currency)),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},a.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},o.Per," ",U({interval:a.interval,useShortFormPlanIntervals:m}))),!r&&e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},M(a.amount,a.currency)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},o.Per," ",U({interval:a.interval,useShortFormPlanIntervals:m}))),a.usageCharges&&a.usageCharges.length>0&&e.createElement(t.BlockStack,null,a.usageCharges.map((u,i)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${i}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:V,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},u.terms))))),z=({plan:a,trialDaysAsFeature:r=!1})=>e.createElement(t.BlockStack,{gap:"100"},r&&a.trialDays&&a.trialDays>0&&e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:F,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},o.FreeTrialLength.replace("{{ trialDays }}",a.trialDays))),a.featuresOrder.map((m,u)=>{const i=a.features[m];if(i.type!=="boolean"||i.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${u}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:F,tone:"positive"})),i.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},i.name):e.createElement(t.Text,{tone:"subdued"},i.value," ",i.name))})),G=({plan:a,discount:r,buttonLabel:m,onSelectPlan:u,activePlan:i=!1,useShortFormPlanIntervals:s=!0,recommended:p=!1,trialDaysAsFeature:f=!1})=>e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},e.createElement(W,{plan:a,recommended:p}),e.createElement(X,{plan:a,discount:r,useShortFormPlanIntervals:s}),e.createElement(t.Button,{size:"large",variant:p?"primary":"secondary",onClick:()=>{u(a)},disabled:i},i?o.CurrentPlan:m||o.SelectPlan),e.createElement(z,{plan:a,trialDaysAsFeature:f}))),ne=({customer:a,plans:r,onSubscribe:m,backUrl:u="",showRecommendedBadge:i=!0,customFieldCta:s,customFieldPlanRecommended:p="Recommended",showPlanIntervalToggle:f=!0,showTrialDaysAsFeature:T=!0,useShortFormPlanIntervals:P,pageWidth:L="default",showCustomPlans:Y=!0})=>{const A=a==null?void 0:a.subscription,I=new URLSearchParams(window.location.search),B=r.some(c=>c.interval===d.ANNUAL)&&r.some(c=>c.interval===d.EVERY_30_DAYS),y=r.find(c=>c.id===(A==null?void 0:A.plan.id)),[k,C]=e.useState(y?y.interval:B?d.ANNUAL:d.EVERY_30_DAYS),S=r.filter(c=>c.availability!=="customerTag"&&c.availability!=="customer"),w=f&&B?S.filter(c=>c.interval===k):S,h=Y?r.filter(c=>c.availability==="customerTag"||c.availability==="customer"):[],[x,N]=e.useState(I.get("subscribed")==="true"),R=(c=w.length)=>c%4===0?{xs:6,sm:6,md:2,lg:3,xl:3}:c%3===0?{xs:6,sm:6,md:2,lg:4,xl:4}:c%2===0?{xs:6,sm:6,md:3,lg:6,xl:6}:c===1?{xs:6,sm:6,md:6,lg:12,xl:12}:{xs:6,sm:6,md:2,lg:4,xl:4};return e.createElement(t.Page,{title:o.Plans,backAction:u?{content:o.Back,url:u}:void 0,secondaryActions:f&&B?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:k===d.EVERY_30_DAYS,onClick:()=>C(d.EVERY_30_DAYS)},o.Monthly),e.createElement(t.Button,{pressed:k===d.ANNUAL,onClick:()=>C(d.ANNUAL)},o.Yearly)):void 0,fullWidth:L==="full",narrowWidth:L==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},x&&e.createElement(t.Banner,{tone:"success",title:o.SubscribeSuccessTitle,onDismiss:()=>{N(!1),window.history.replaceState({},document.title,window.location.pathname)}},o.SubscribeSuccessBody),e.createElement(t.Grid,null,w.map((c,_)=>{var b;const D=((b=c.discounts)==null?void 0:b.length)>0?c.discounts.reduce((n,E)=>n.discountedAmount<E.discountedAmount?n:E):null,l=s&&c.customFields?c.customFields[s]:void 0;return e.createElement(t.Grid.Cell,{key:`plan-${_}`,columnSpan:R()},e.createElement(G,{plan:c,discount:D,onSelectPlan:n=>{m(n)},activePlan:(y==null?void 0:y.id)===c.id,useShortFormPlanIntervals:P,recommended:i&&c.customFields&&c.customFields[p],trialDaysAsFeature:T,buttonLabel:l}))})),(h==null?void 0:h.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(h==null?void 0:h.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},o.CustomPlans)),e.createElement(t.Grid,null,h.map((c,_)=>{var b;const D=((b=c.discounts)==null?void 0:b.length)>0?c.discounts.reduce((n,E)=>n.discountedAmount<E.discountedAmount?n:E):null,l=s&&c.customFields?c.customFields[s]:void 0;return e.createElement(t.Grid.Cell,{key:`custom-plan-${_}`,columnSpan:R()},e.createElement(G,{plan:c,discount:D,onSelectPlan:n=>{m(n)},activePlan:(y==null?void 0:y.id)===c.id,useShortFormPlanIntervals:P,recommended:i&&c.customFields&&c.customFields[p],trialDaysAsFeature:T,buttonLabel:l}))})))))))},ae=({customer:a,plans:r,onSubscribe:m,backUrl:u="",showRecommendedBadge:i=!0,customFieldCta:s=null,customFieldPlanRecommended:p="Recommended",addSpacingToNonRecommendedPlans:f=!0,showPlanIntervalToggle:T=!0,showTrialDaysAsFeature:P=!0,useShortFormPlanIntervals:L=!0,pageWidth:Y="default",showCustomPlans:A=!0})=>{const I=a==null?void 0:a.subscription,B=new URLSearchParams(window.location.search),y=r.some(n=>n.interval===d.ANNUAL)&&r.some(n=>n.interval===d.EVERY_30_DAYS),k=r.find(n=>n.id===(I==null?void 0:I.plan.id)),[C,S]=e.useState(k?k.interval:y?d.ANNUAL:d.EVERY_30_DAYS),w=r.filter(n=>n.availability!=="customerTag"&&n.availability!=="customer"),h=T&&y?w.filter(n=>n.interval===C):w,x=A?r.filter(n=>n.availability==="customerTag"||n.availability==="customer"):[],[N,R]=e.useState(B.get("subscribed")==="true"),c=(n=h.length)=>n%4===0?{xs:6,sm:6,md:2,lg:3,xl:3}:n%3===0?{xs:6,sm:6,md:2,lg:4,xl:4}:n%2===0?{xs:6,sm:6,md:3,lg:6,xl:6}:n===1?{xs:6,sm:6,md:6,lg:12,xl:12}:{xs:6,sm:6,md:2,lg:4,xl:4},_=()=>h.length%4===0?4:h.length%3===0?3:h.length%2===0?2:h.length===1?1:4,D=n=>e.createElement(t.BlockStack,{gap:"100"},e.createElement(t.Text,{variant:"headingMd",alignment:"center"},n.name),n.description&&e.createElement(t.Text,{variant:"bodyLg",tone:"subdued",alignment:"center"},n.description)),l=n=>e.createElement(t.BlockStack,{gap:"300"},P&&n.trialDays!==0&&e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:F,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},o.FreeTrialLength.replace("{{ trialDays }}",n.trialDays))),n.featuresOrder.map((E,g)=>{const v=n.features[E];if(v.type!=="boolean"||v.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${g}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:F,tone:"positive"})),v.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},v.name):e.createElement(t.Text,{tone:"subdued"},v.value," ",v.name))})),b=n=>{let E=n.amount;for(const g of n.discounts)E=g.percentage?n.amount-n.amount*(g.percentage/100):n.amount-g.amount;return e.createElement(t.BlockStack,{gap:"100"},n.discounts.length>0?e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"heading3xl"},M(E,n.currency,!0)),e.createElement(t.Text,{variant:"heading3xl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},M(n.amount,n.currency,!0)),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},o.Per," ",U({interval:n.interval,useShortFormPlanIntervals:L}))):e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"heading3xl"},M(n.amount,n.currency,!0)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},o.Per," ",U({interval:n.interval,useShortFormPlanIntervals:L}))),n.usageCharges.length>0&&e.createElement(t.BlockStack,null,n.usageCharges.map((g,v)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${v}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:V,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},g.terms)))))};return e.createElement(t.Page,{title:o.Plans,backAction:u&&u!==""?{content:o.Back,url:u}:void 0,secondaryActions:T&&y?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:C===d.EVERY_30_DAYS,onClick:()=>S(d.EVERY_30_DAYS)},o.Monthly),e.createElement(t.Button,{pressed:C===d.ANNUAL,onClick:()=>S(d.ANNUAL)},o.Yearly)):void 0,fullWidth:Y==="full",narrowWidth:Y==="narrow"},e.createElement(t.Box,{paddingBlockEnd:"800"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},N&&e.createElement(t.Banner,{tone:"success",title:o.SubscribeSuccessTitle,onDismiss:()=>{R(!1),window.history.replaceState({},document.title,window.location.pathname)}},o.SubscribeSuccessBody),e.createElement(t.Grid,{columns:_()},h.map((n,E)=>{const g=n.customFields&&n.customFields[p],v=s&&n.customFields[s];return e.createElement(t.Grid.Cell,{key:`plan-${E}`,columnSpan:c()},e.createElement(t.Box,{position:"relative",minHeight:"100%"},e.createElement(t.Box,{paddingBlock:!f||g?void 0:"800",minHeight:"100%"},e.createElement(t.Box,{background:g?"bg-surface":"bg-surface-secondary",borderStyle:"solid",borderColor:"border",borderWidth:"025",paddingBlock:f&&g?"1600":"800",paddingInline:"400",borderRadius:"200",minHeight:"calc(100% - calc(var(--p-space-800) * 2))"},e.createElement(t.BlockStack,{gap:"800"},e.createElement(t.BlockStack,{gap:"400"},D(n),b(n)),e.createElement(t.Button,{size:"large",variant:g?"primary":"secondary",onClick:()=>m(n)},v?n.customFields[s]:o.SelectPlan),l(n),g&&i&&e.createElement(t.InlineStack,{key:`plan-feature-${E}`,align:"center",gap:"100"},e.createElement(t.Badge,{tone:"success"},o.MostPopular)))))))})),(x==null?void 0:x.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(x==null?void 0:x.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},o.CustomPlans)),e.createElement(t.Grid,null,x.map((n,E)=>{const g=n.customFields&&n.customFields[p],v=s&&n.customFields[s];return e.createElement(t.Grid.Cell,{key:`custom-plan-${E}`,columnSpan:c(x.length)},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},D(n),b(n),e.createElement(t.Button,{size:"large",variant:g?"primary":"secondary",onClick:()=>m(n)},v?n.customFields[s]:o.SelectPlan),l(n))))}))))))))},re=({customer:a,plans:r,onSubscribe:m,backUrl:u="",showRecommendedBadge:i=!0,customFieldCta:s=null,customFieldPlanRecommended:p="Recommended",showPlanIntervalToggle:f=!1,showTrialDaysAsFeature:T=!0,useShortFormPlanIntervals:P=!0,pageWidth:L="default",showCustomPlans:Y=!0})=>{const A=a==null?void 0:a.subscription,I=new URLSearchParams(window.location.search),B=r.some(l=>l.interval===d.ANNUAL)&&r.some(l=>l.interval===d.EVERY_30_DAYS),y=r.find(l=>l.id===(A==null?void 0:A.plan.id)),[k,C]=e.useState(y?y.interval:B?d.ANNUAL:d.EVERY_30_DAYS),S=r.filter(l=>l.availability!=="customerTag"&&l.availability!=="customer"),w=f&&B?S.filter(l=>l.interval===k):S,h=Y?r.filter(l=>l.availability==="customerTag"||l.availability==="customer"):[],[x,N]=e.useState(I.get("subscribed")==="true"),R=({plan:l,discount:b})=>e.createElement(t.BlockStack,null,e.createElement(t.Text,{variant:"bodyLg"},l.name),l.description&&e.createElement(t.Text,{tone:"subdued"},l.description)),c=({plan:l,discount:b})=>e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{fontWeight:"medium"},o.Features),e.createElement(t.BlockStack,{gap:"100"},T&&l.trialDays!==0&&e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:F,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},o.FreeTrialLength.replace("{{ trialDays }}",l.trialDays))),l.featuresOrder.map((n,E)=>{const g=l.features[n];if(g.type!=="boolean"||g.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${E}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:F,tone:"positive"})),g.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},g.name):e.createElement(t.Text,{tone:"subdued"},g.value," ",g.name))}))),_=({plan:l,discount:b})=>e.createElement(t.BlockStack,{gap:"100"},b?e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},M(b.discountedAmount,l.currency)),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},l.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},o.Per," ",U({interval:l.interval,useShortFormPlanIntervals:P}))):e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},M(l.amount,l.currency)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},o.Per," ",U({interval:l.interval,useShortFormPlanIntervals:P}))),l.usageCharges.length>0&&e.createElement(t.BlockStack,null,l.usageCharges.map((n,E)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${E}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:V,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},n.terms))))),D=({plan:l,discount:b})=>{const n=s&&l.customFields[s],E=l.customFields&&l.customFields[p];return e.createElement(t.InlineStack,{blockAlign:"center",gap:"400"},e.createElement(t.Button,{size:"large",variant:E?"primary":"secondary",onClick:()=>m({planId:l.id,discountId:b==null?void 0:b.id}),disabled:(y==null?void 0:y.id)===l.id},(y==null?void 0:y.id)===l.id?o.CurrentPlan:n?l.customFields[s]:o.SelectPlan),E&&i&&e.createElement(t.Box,null,e.createElement(t.Badge,{tone:"success"},o.MostPopular)))};return e.createElement(t.Page,{title:o.Plans,backAction:u!==""?{content:o.Back,url:u}:void 0,secondaryActions:f&&B?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:k===d.EVERY_30_DAYS,onClick:()=>C(d.EVERY_30_DAYS)},o.Monthly),e.createElement(t.Button,{pressed:k===d.ANNUAL,onClick:()=>C(d.ANNUAL)},o.Year)):void 0,fullWidth:L==="full",narrowWidth:L==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"400"},x&&e.createElement(t.Banner,{tone:"success",title:o.SubscribeSuccessTitle,onDismiss:()=>{N(!1),window.history.replaceState({},document.title,window.location.pathname)}},o.SubscribeSuccessBody),w.map((l,b)=>{var E;const n=((E=l.discounts)==null?void 0:E.length)>0?l.discounts.reduce((g,v)=>g.discountedAmount<v.discountedAmount?g:v):null;return e.createElement(t.Card,{key:`plan-${b}`},e.createElement(t.Grid,null,e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},e.createElement(t.BlockStack,{gap:"400"},e.createElement(t.BlockStack,{gap:"200"},R({plan:l,discount:n}),_({plan:l,discount:n})),e.createElement(t.Box,null,D({plan:l,discount:n})))),e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},c({plan:l,discount:n}))))}),(h==null?void 0:h.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(h==null?void 0:h.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},o.CustomPlans)),e.createElement(t.Grid,null,h.map((l,b)=>{var E;const n=((E=l.discounts)==null?void 0:E.length)>0?l.discounts.reduce((g,v)=>g.discountedAmount<v.discountedAmount?g:v):null;return e.createElement(t.Grid.Cell,{key:`custom-plan-${b}`,columnSpan:columnSpan()},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},R({plan:l,discount:n}),_({plan:l,discount:n}),D({plan:l,discount:n}),c({plan:l,discount:n}))))})))))))};exports.FeaturesSection=z;exports.HighlightedPlanCards=ae;exports.HorizontalPlanCard=G;exports.HorizontalPlanCards=ne;exports.Labels=o;exports.MantleProvider=K;exports.PlanInterval=d;exports.PricingSection=X;exports.TitleSection=W;exports.VerticalPlanCards=re;exports.featureEnabled=$;exports.featureSort=ee;exports.intervalLabel=U;exports.intervalLabelLong=O;exports.intervalLabelShort=H;exports.money=M;exports.useMantle=Q;
