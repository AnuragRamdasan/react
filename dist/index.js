"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("react"),t=require("@shopify/polaris");class te{constructor({appId:a,apiKey:l,customerApiToken:o,apiUrl:c="https://appapi.heymantle.com/v1"}){if(!a)throw new Error("MantleClient appId is required");if(typeof window<"u"&&l)throw new Error("MantleClient apiKey should never be used in the browser");if(!l&&!o)throw new Error("MantleClient one of apiKey or customerApiToken is required");this.appId=a,this.apiKey=l,this.customerApiToken=o,this.apiUrl=c}async mantleRequest({path:a,method:l="GET",body:o}){try{return await(await fetch(`${this.apiUrl}${a.startsWith("/")?"":"/"}${a}`,{method:l,headers:{"Content-Type":"application/json",Accept:"application/json","X-Mantle-App-Id":this.appId,...this.apiKey?{"X-Mantle-App-Api-Key":this.apiKey}:{},...this.customerApiToken?{"X-Mantle-Customer-Api-Token":this.customerApiToken}:{}},...o&&{body:JSON.stringify(o)}})).json()}catch(c){throw console.error(`[mantleRequest] ${a} error: ${c.message}`),c}}async identify({platformId:a,myshopifyDomain:l,platform:o="shopify",accessToken:c,name:s,email:h,customFields:S}){return await this.mantleRequest({path:"identify",method:"POST",body:{platformId:a,myshopifyDomain:l,platform:o,accessToken:c,name:s,email:h,customFields:S}})}async getCustomer(){return(await this.mantleRequest({path:"customer"})).customer}async subscribe({planId:a,planIds:l,discountId:o,returnUrl:c,billingProvider:s}){return await this.mantleRequest({path:"subscriptions",method:"POST",body:{planId:a,planIds:l,discountId:o,returnUrl:c,billingProvider:s}})}async cancelSubscription({cancelReason:a}={}){return await this.mantleRequest({path:"subscriptions",method:"DELETE",...a&&{body:{cancelReason:a}}})}async updateSubscription({id:a,cappedAmount:l}){return await this.mantleRequest({path:"subscriptions",method:"PUT",body:{id:a,cappedAmount:l}})}async sendUsageEvent({eventId:a,eventName:l,customerId:o,properties:c={}}){return await this.mantleRequest({path:"usage_events",method:"POST",body:{eventId:a,eventName:l,...o?{customerId:o}:{},properties:c}})}async sendUsageEvents({events:a}){return await this.mantleRequest({path:"usage_events",method:"POST",body:{events:a}})}}var ne={MantleClient:te};const j=e.createContext(),ae=({feature:n,count:a=0})=>(n==null?void 0:n.type)==="boolean"?n.value:(n==null?void 0:n.type)==="limit"?a<n.value||n.value===-1:!1,re=({appId:n,customerApiToken:a,apiUrl:l="https://appapi.heymantle.com/v1",children:o})=>{const c=new ne.MantleClient({appId:n,customerApiToken:a,apiUrl:l}),[s,h]=e.useState(null),[S,v]=e.useState(!0),[k,B]=e.useState(null),x=async()=>{try{v(!0);const m=await c.getCustomer();h(m)}catch(m){B(m)}finally{v(!1)}},b=async m=>{await c.sendUsageEvent(m)},L=async({planId:m,planIds:E,discountId:C,billingProvider:M,returnUrl:g})=>await c.subscribe({planId:m,planIds:E,discountId:C,billingProvider:M,returnUrl:g}),P=async()=>await c.cancelSubscription();e.useEffect(()=>{a&&x()},[a]);const p=(s==null?void 0:s.plans)||[],y=s==null?void 0:s.subscription,d=y==null?void 0:y.plan;return e.createElement(j.Provider,{value:{customer:s,subscription:y,plans:p,loading:S,error:k,client:c,sendUsageEvent:b,subscribe:L,cancelSubscription:P,isFeatureEnabled:({featureKey:m,count:E=0})=>s!=null&&s.features[m]?ae({feature:s.features[m],count:E}):!1,limitForFeature:({featureKey:m})=>s!=null&&s.features[m]&&d.features[m].type==="limit"?s.features[m].value:-1,refetch:async()=>{await x()}}},o)},le=()=>{const n=e.useContext(j);if(n===void 0)throw new Error("useMantle must be used within a MantleProvider");return n},z=n=>n.type==="boolean"&&n.value==!0||n.type==="limit"&&n.value!==0,ce=(n,a)=>z(a)-z(n)||n.name.localeCompare(a.name),oe=(n="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:n,notation:"standard"}),I=(n,a="USD",l=!0)=>{let o=oe(a).format(n);return l&&(o=o.replace(/\.00$/,"")),o},u={Annual:"ANNUAL",Every30Days:"EVERY_30_DAYS"},$={Public:"public",CustomerTag:"customerTag",ShopifyPlan:"shopifyPlan",Customer:"customer",Hidden:"hidden"},i={Back:"Back",CurrentPlan:"Current plan",CustomPlans:"Custom plans",CustomPlansDescription:"Plans tailored to your specific needs",FreeTrialLength:"{{ trialDays }}-day free trial",Features:"Features",Month:"month",MonthShort:"mo",Monthly:"Monthly",Year:"year",YearShort:"yr",Yearly:"Yearly",MostPopular:"Most popular",Per:"/",Plans:"Plans",SelectPlan:"Select plan",SubscribeSuccessTitle:"Subscription successful",SubscribeSuccessBody:"Thanks for subscribing to our app!"},_=(n=u.Every30Days)=>{switch(n){case u.Annual:return"year";case u.Every30Days:default:return"month"}},K=(n=u.Every30Days)=>{switch(n){case u.Annual:return"yr";case u.Every30Days:default:return"mo"}},F=({interval:n=u.Every30Days,useShortFormPlanIntervals:a=!0})=>a?K(n):_(n),G=({plan:n,customFieldKey:a="recommended"})=>{var l;return!!((l=n.customFields)!=null&&l[a])},O=({plan:n,customFieldKey:a="buttonLabel"})=>{var l;return((l=n.customFields)==null?void 0:l[a])||i.SelectPlan},V=({plan:n})=>{var a;return((a=n.discounts)==null?void 0:a.length)>0?n.discounts.reduce((l,o)=>l.discountedAmount<o.discountedAmount?l:o):void 0},ie=(n=4)=>n%4===0?{xs:6,sm:6,md:2,lg:3,xl:3}:n%3===0?{xs:6,sm:6,md:2,lg:4,xl:4}:n%2===0?{xs:6,sm:6,md:3,lg:6,xl:6}:n===1?{xs:6,sm:6,md:6,lg:12,xl:12}:{xs:6,sm:6,md:2,lg:4,xl:4},se=(n=4)=>n%4===0?4:n%3===0?3:n%2===0?2:n===1?1:4;var H=function(a){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},a),e.createElement("path",{fillRule:"evenodd",d:"M15.78 5.97a.75.75 0 0 1 0 1.06l-6.5 6.5a.75.75 0 0 1-1.06 0l-3.25-3.25a.75.75 0 1 1 1.06-1.06l2.72 2.72 5.97-5.97a.75.75 0 0 1 1.06 0Z"}))};H.displayName="CheckIcon";var Y=function(a){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},a),e.createElement("path",{d:"M10.75 6.75a.75.75 0 0 0-1.5 0v2.5h-2.5a.75.75 0 0 0 0 1.5h2.5v2.5a.75.75 0 0 0 1.5 0v-2.5h2.5a.75.75 0 0 0 0-1.5h-2.5v-2.5Z"}))};Y.displayName="PlusIcon";const ue=({plan:n})=>e.createElement(t.BlockStack,{gap:"100"},e.createElement(t.Text,{variant:"headingMd",alignment:"center"},n.name),n.description&&e.createElement(t.Text,{variant:"bodyLg",tone:"subdued",alignment:"center"},n.description)),de=({plan:n,discount:a,useShortFormPlanIntervals:l=!0})=>e.createElement(t.BlockStack,{gap:"100"},!!a&&e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"heading3xl"},I(discountedAmount,n.currency,!0)),e.createElement(t.Text,{variant:"heading3xl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},I(n.amount,n.currency,!0)),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},i.Per," ",F({interval:n.interval,useShortFormPlanIntervals:l}))),!a&&e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"heading3xl"},I(n.amount,n.currency,!0)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},i.Per," ",F({interval:n.interval,useShortFormPlanIntervals:l}))),n.usageCharges.length>0&&e.createElement(t.BlockStack,null,n.usageCharges.map((o,c)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${c}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:Y,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},o.terms))))),me=({plan:n,trialDaysAsFeature:a=!1})=>e.createElement(t.BlockStack,{gap:"300"},a&&n.trialDays&&n.trialDays>0?e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:H,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},i.FreeTrialLength.replace("{{ trialDays }}",n.trialDays))):null,n.featuresOrder.map((l,o)=>{const c=n.features[l];if(c.type!=="boolean"||c.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${o}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:H,tone:"positive"})),c.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},c.name):e.createElement(t.Text,{tone:"subdued"},c.value," ",c.name))})),ge=({plan:n,discount:a,buttonLabel:l,onSelectPlan:o,useShortFormPlanIntervals:c=!0,trialDaysAsFeature:s=!1,expanded:h=!1,isActivePlan:S=!1,isRecommendedPlan:v=!1,isCustomPlan:k=!1,showRecommendedPlanBadge:B=!0})=>e.createElement(t.Box,{position:"relative",minHeight:"100%"},e.createElement(t.Box,{paddingBlock:h||v?void 0:"800",minHeight:"100%"},e.createElement(t.Box,{background:v||k?"bg-surface":"bg-surface-secondary",borderStyle:"solid",borderColor:"border",borderWidth:"025",paddingBlock:h||v?"1600":"800",paddingInline:"400",borderRadius:"200",minHeight:"calc(100% - calc(var(--p-space-800) * 2))"},e.createElement(t.BlockStack,{gap:"800"},e.createElement(t.BlockStack,{gap:"400"},e.createElement(ue,{plan:n}),e.createElement(de,{plan:n,discount:a,useShortFormPlanIntervals:c})),e.createElement(t.Button,{size:"large",variant:v?"primary":"secondary",onClick:()=>{o?o({plan:n,discount:a}):console.log("No onSelectPlan callback provided")},disabled:S},l||i.SelectPlan),e.createElement(me,{plan:n,trialDaysAsFeature:s}),v&&B&&e.createElement(t.InlineStack,{align:"center",gap:"100"},e.createElement(t.Badge,{tone:"success"},i.MostPopular)))))),D={Highlighted:"highlighted",Horizontal:"horizontal",Vertical:"vertical"},q=({plans:n,customer:a,onSelectPlan:l,planInterval:o,cardType:c=D.Horizontal,trialDaysAsFeature:s=!0,useShortFormPlanIntervals:h=!0,keyForRecommended:S="recommended",keyForCustomButtonLabel:v="buttonLabel",showRecommendedPlanBadge:k=!0,applyDiscount:B=!0})=>{var y;const x=(y=a==null?void 0:a.subscription)!=null&&y.active?a.subscription:void 0,b=x==null?void 0:x.plan,L=o?n.filter(d=>d.interval===o):n,P=c===D.Vertical?1:se(L.length),p=ie(P);return e.createElement(t.Grid,{columns:P},L.map(d=>{const m=B?V({plan:d}):void 0;return e.createElement(t.Grid.Cell,{columnSpan:p,key:d.id},c===D.Highlighted&&e.createElement(ge,{key:`HighlightedPlanCard-${d.id}`,plan:d,discount:m,onSelectPlan:l,isActivePlan:(b==null?void 0:b.id)===d.id,trialDaysAsFeature:s,useShortFormPlanIntervals:h,isCustomPlan:d.availability!==$.Public,isRecommendedPlan:G({plan:d,customFieldKey:S}),buttonLabel:O({plan:d,customFieldKey:v}),showRecommendedPlanBadge:k}),c===D.Horizontal&&e.createElement(ee,{key:`HorizontalPlanCard-${d.id}`,plan:d,discount:m,onSelectPlan:l,isActivePlan:(b==null?void 0:b.id)===d.id,trialDaysAsFeature:s,useShortFormPlanIntervals:h,isRecommendedPlan:G({plan:d,customFieldKey:S}),buttonLabel:O({plan:d,customFieldKey:v}),showRecommendedPlanBadge:k}))}))},ye=({customer:n,plans:a,onSubscribe:l,backUrl:o="",showRecommendedBadge:c=!0,customFieldCta:s,customFieldPlanRecommended:h="Recommended",showPlanIntervalToggle:S=!0,showTrialDaysAsFeature:v=!0,useShortFormPlanIntervals:k,pageWidth:B="default",showCustomPlans:x=!0})=>{const b=n==null?void 0:n.subscription,L=new URLSearchParams(window.location.search),P=a.some(g=>g.interval===u.Annual)&&a.some(g=>g.interval===u.Every30Days),p=a.find(g=>g.id===(b==null?void 0:b.plan.id)),[y,d]=e.useState(p?p.interval:P?u.Annual:u.Every30Days),m=a.filter(g=>g.availability===$.Public),E=x?a.filter(g=>g.availability!==$.Public):[],[C,M]=e.useState(L.get("subscribed")==="true");return e.createElement(t.Page,{title:i.Plans,backAction:o?{content:i.Back,url:o}:void 0,secondaryActions:S&&P?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:y===u.Every30Days,onClick:()=>d(u.Every30Days)},i.Monthly),e.createElement(t.Button,{pressed:y===u.Annual,onClick:()=>d(u.Annual)},i.Yearly)):void 0,fullWidth:B==="full",narrowWidth:B==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},C&&e.createElement(t.Banner,{tone:"success",title:i.SubscribeSuccessTitle,onDismiss:()=>{M(!1),window.history.replaceState({},document.title,window.location.pathname)}},i.SubscribeSuccessBody),e.createElement(q,{plans:m,onSelectPlan:l,planInterval:y,cardType:D.Horizontal,keyForRecommended:h,keyForCustomButtonLabel:s,trialDaysAsFeature:v,useShortFormPlanIntervals:k,showRecommendedPlanBadge:c}),(E==null?void 0:E.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(E==null?void 0:E.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},i.CustomPlans)),e.createElement(q,{plans:E,onSelectPlan:l,planInterval:y,cardType:D.Horizontal,keyForRecommended:h,keyForCustomButtonLabel:s,trialDaysAsFeature:v,useShortFormPlanIntervals:k,showRecommendedPlanBadge:c}))))))},Z=({plan:n,isRecommendedPlan:a=!1})=>e.createElement(t.BlockStack,null,e.createElement(t.InlineStack,{align:"space-between",gap:"100"},e.createElement(t.Text,{variant:"bodyLg"},n.name),a&&e.createElement(t.Badge,{tone:"success"},i.MostPopular)),n.description&&e.createElement(t.Text,{tone:"subdued"},n.description)),J=({plan:n,discount:a,useShortFormPlanIntervals:l=!0})=>e.createElement(t.BlockStack,{gap:"100"},!!a&&e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},I(a.discountedAmount,n.currency)),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},n.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},i.Per," ",F({interval:n.interval,useShortFormPlanIntervals:l}))),!a&&e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},I(n.amount,n.currency)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},i.Per," ",F({interval:n.interval,useShortFormPlanIntervals:l}))),n.usageCharges&&n.usageCharges.length>0&&e.createElement(t.BlockStack,null,n.usageCharges.map((o,c)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${c}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:Y,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},o.terms))))),Q=({plan:n,trialDaysAsFeature:a=!1})=>e.createElement(t.BlockStack,{gap:"100"},a&&n.trialDays&&n.trialDays>0?e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:H,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},i.FreeTrialLength.replace("{{ trialDays }}",n.trialDays))):null,n.featuresOrder.map((l,o)=>{const c=n.features[l];if(c.type!=="boolean"||c.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${o}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:H,tone:"positive"})),c.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},c.name):e.createElement(t.Text,{tone:"subdued"},c.value," ",c.name))})),ee=({plan:n,discount:a,buttonLabel:l,onSelectPlan:o,useShortFormPlanIntervals:c=!0,trialDaysAsFeature:s=!1,isRecommendedPlan:h=!1,isActivePlan:S=!1})=>e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},e.createElement(Z,{plan:n,isRecommendedPlan:h}),e.createElement(J,{plan:n,discount:a,useShortFormPlanIntervals:c}),e.createElement(t.Button,{size:"large",variant:h?"primary":"secondary",onClick:()=>{o?o({plan:n,discount:a}):console.log("No onSelectPlan callback provided")},disabled:S},S?i.CurrentPlan:l||i.SelectPlan),e.createElement(Q,{plan:n,trialDaysAsFeature:s}))),Ee=({customer:n,plans:a,onSubscribe:l,backUrl:o="",showRecommendedBadge:c=!0,customFieldCta:s=null,customFieldPlanRecommended:h="Recommended",showPlanIntervalToggle:S=!0,showTrialDaysAsFeature:v=!0,useShortFormPlanIntervals:k=!0,pageWidth:B="default",showCustomPlans:x=!0})=>{const b=n==null?void 0:n.subscription,L=new URLSearchParams(window.location.search),P=a.some(g=>g.interval===u.Annual)&&a.some(g=>g.interval===u.Every30Days),p=a.find(g=>g.id===(b==null?void 0:b.plan.id)),[y,d]=e.useState(p?p.interval:P?u.Annual:u.Every30Days),m=a.filter(g=>g.availability===$.Public),E=x?a.filter(g=>g.availability!==$.Public):[],[C,M]=e.useState(L.get("subscribed")==="true");return e.createElement(t.Page,{title:i.Plans,backAction:o&&o!==""?{content:i.Back,url:o}:void 0,secondaryActions:S&&P?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:y===u.Every30Days,onClick:()=>d(u.Every30Days)},i.Monthly),e.createElement(t.Button,{pressed:y===u.Annual,onClick:()=>d(u.Annual)},i.Yearly)):void 0,fullWidth:B==="full",narrowWidth:B==="narrow"},e.createElement(t.Box,{paddingBlockEnd:"800"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},C&&e.createElement(t.Banner,{tone:"success",title:i.SubscribeSuccessTitle,onDismiss:()=>{M(!1),window.history.replaceState({},document.title,window.location.pathname)}},i.SubscribeSuccessBody),e.createElement(q,{plans:m,onSelectPlan:l,planInterval:y,cardType:D.Highlighted,keyForRecommended:h,keyForCustomButtonLabel:s,trialDaysAsFeature:v,useShortFormPlanIntervals:k,showRecommendedPlanBadge:c}),(E==null?void 0:E.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(E==null?void 0:E.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},i.CustomPlans)),e.createElement(q,{plans:E,onSelectPlan:l,planInterval:y,cardType:D.Highlighted,keyForRecommended:h,keyForCustomButtonLabel:s,trialDaysAsFeature:v,useShortFormPlanIntervals:k,showRecommendedPlanBadge:c})))))))},he=({customer:n,plans:a,onSubscribe:l,backUrl:o="",showRecommendedBadge:c=!0,customFieldCta:s=null,customFieldPlanRecommended:h="Recommended",showPlanIntervalToggle:S=!1,showTrialDaysAsFeature:v=!0,useShortFormPlanIntervals:k=!0,pageWidth:B="default",showCustomPlans:x=!0})=>{const b=n==null?void 0:n.subscription,L=new URLSearchParams(window.location.search),P=a.some(r=>r.interval===u.Annual)&&a.some(r=>r.interval===u.Every30Days),p=a.find(r=>r.id===(b==null?void 0:b.plan.id)),[y,d]=e.useState(p?p.interval:P?u.Annual:u.Every30Days),m=a.filter(r=>r.availability!=="customerTag"&&r.availability!=="customer"),E=S&&P?m.filter(r=>r.interval===y):m,C=x?a.filter(r=>r.availability==="customerTag"||r.availability==="customer"):[],[M,g]=e.useState(L.get("subscribed")==="true"),U=({plan:r,discount:w})=>e.createElement(t.BlockStack,null,e.createElement(t.Text,{variant:"bodyLg"},r.name),r.description&&e.createElement(t.Text,{tone:"subdued"},r.description)),W=({plan:r,discount:w})=>e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{fontWeight:"medium"},i.Features),e.createElement(t.BlockStack,{gap:"100"},v&&r.trialDays!==0&&e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:H,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},i.FreeTrialLength.replace("{{ trialDays }}",r.trialDays))),r.featuresOrder.map((f,T)=>{const A=r.features[f];if(A.type!=="boolean"||A.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${T}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:H,tone:"positive"})),A.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},A.name):e.createElement(t.Text,{tone:"subdued"},A.value," ",A.name))}))),X=({plan:r,discount:w})=>e.createElement(t.BlockStack,{gap:"100"},w?e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},I(w.discountedAmount,r.currency)),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},r.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},i.Per," ",F({interval:r.interval,useShortFormPlanIntervals:k}))):e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},I(r.amount,r.currency)),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},i.Per," ",F({interval:r.interval,useShortFormPlanIntervals:k}))),r.usageCharges.length>0&&e.createElement(t.BlockStack,null,r.usageCharges.map((f,T)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${T}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:Y,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},f.terms))))),N=({plan:r,discount:w})=>{const f=s&&r.customFields[s],T=r.customFields&&r.customFields[h];return e.createElement(t.InlineStack,{blockAlign:"center",gap:"400"},e.createElement(t.Button,{size:"large",variant:T?"primary":"secondary",onClick:()=>l({planId:r.id,discountId:w==null?void 0:w.id}),disabled:(p==null?void 0:p.id)===r.id},(p==null?void 0:p.id)===r.id?i.CurrentPlan:f?r.customFields[s]:i.SelectPlan),T&&c&&e.createElement(t.Box,null,e.createElement(t.Badge,{tone:"success"},i.MostPopular)))};return e.createElement(t.Page,{title:i.Plans,backAction:o!==""?{content:i.Back,url:o}:void 0,secondaryActions:S&&P?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:y===u.Every30Days,onClick:()=>d(u.Every30Days)},i.Monthly),e.createElement(t.Button,{pressed:y===u.Annual,onClick:()=>d(u.Annual)},i.Year)):void 0,fullWidth:B==="full",narrowWidth:B==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"400"},M&&e.createElement(t.Banner,{tone:"success",title:i.SubscribeSuccessTitle,onDismiss:()=>{g(!1),window.history.replaceState({},document.title,window.location.pathname)}},i.SubscribeSuccessBody),E.map((r,w)=>{var T;const f=((T=r.discounts)==null?void 0:T.length)>0?r.discounts.reduce((A,R)=>A.discountedAmount<R.discountedAmount?A:R):null;return e.createElement(t.Card,{key:`plan-${w}`},e.createElement(t.Grid,null,e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},e.createElement(t.BlockStack,{gap:"400"},e.createElement(t.BlockStack,{gap:"200"},U({plan:r,discount:f}),X({plan:r,discount:f})),e.createElement(t.Box,null,N({plan:r,discount:f})))),e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},W({plan:r,discount:f}))))}),(C==null?void 0:C.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(C==null?void 0:C.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},i.CustomPlans)),e.createElement(t.Grid,null,C.map((r,w)=>{var T;const f=((T=r.discounts)==null?void 0:T.length)>0?r.discounts.reduce((A,R)=>A.discountedAmount<R.discountedAmount?A:R):null;return e.createElement(t.Grid.Cell,{key:`custom-plan-${w}`,columnSpan:columnSpan()},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},U({plan:r,discount:f}),X({plan:r,discount:f}),N({plan:r,discount:f}),W({plan:r,discount:f}))))})))))))};exports.HighlightedPlanCards=Ee;exports.HorizontalPlanCard=ee;exports.HorizontalPlanCards=ye;exports.Labels=i;exports.MantleProvider=re;exports.PlanAvailability=$;exports.PlanCardStack=q;exports.PlanCardType=D;exports.PlanFeaturesSection=Q;exports.PlanInterval=u;exports.PlanPricingSection=J;exports.PlanTitleSection=Z;exports.VerticalPlanCards=he;exports.customButtonLabel=O;exports.featureEnabled=z;exports.featureSort=ce;exports.highestDiscount=V;exports.intervalLabel=F;exports.intervalLabelLong=_;exports.intervalLabelShort=K;exports.isRecommendedPlan=G;exports.money=I;exports.useMantle=le;
