"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("react"),t=require("@shopify/polaris");class W{constructor({appId:l,apiKey:g,customerApiToken:A,apiUrl:T="https://appapi.heymantle.com/v1"}){if(!l)throw new Error("MantleClient appId is required");if(typeof window<"u"&&g)throw new Error("MantleClient apiKey should never be used in the browser");if(!g&&!A)throw new Error("MantleClient one of apiKey or customerApiToken is required");this.appId=l,this.apiKey=g,this.customerApiToken=A,this.apiUrl=T}async mantleRequest({path:l,method:g="GET",body:A}){try{return await(await fetch(`${this.apiUrl}/v1${l.startsWith("/")?"":"/"}${l}`,{method:g,headers:{"Content-Type":"application/json",Accept:"application/json","X-Mantle-App-Id":this.appId,...this.apiKey?{"X-Mantle-App-Api-Key":this.apiKey}:{},...this.customerApiToken?{"X-Mantle-Customer-Api-Token":this.customerApiToken}:{}},...A&&{body:JSON.stringify(A)}})).json()}catch(T){throw console.error(`[mantleRequest] ${l} error: ${T.message}`),T}}async identify({platformId:l,myshopifyDomain:g,platform:A="shopify",accessToken:T,name:s,email:N,customFields:p}){return await this.mantleRequest({path:"identify",method:"POST",body:{platformId:l,myshopifyDomain:g,platform:A,accessToken:T,name:s,email:N,customFields:p}})}async getCustomer(){return(await this.mantleRequest({path:"customer"})).customer}async subscribe({planId:l,returnUrl:g}){return await this.mantleRequest({path:"subscriptions",method:"POST",body:{planId:l,returnUrl:g}})}async cancelSubscription(){return await this.mantleRequest({path:"subscriptions",method:"DELETE"})}async updateSubscription({id:l,cappedAmount:g}){return await this.mantleRequest({path:"subscriptions",method:"PUT",body:{id:l,cappedAmount:g}})}async sendUsageEvent({eventId:l,eventName:g,customerId:A,properties:T={}}){return await this.mantleRequest({path:"usage_events",method:"POST",body:{eventId:l,eventName:g,...A?{customerId:A}:{},properties:T}})}async sendUsageEvents({events:l}){return await this.mantleRequest({path:"usage_events",method:"POST",body:{events:l}})}}var X={MantleClient:W};const q=e.createContext(),K=({feature:m,count:l=0})=>(m==null?void 0:m.type)==="boolean"?m.value:(m==null?void 0:m.type)==="limit"?l<m.value||m.value===-1:!1,j=({appId:m,customerApiToken:l,apiUrl:g="https://appapi.heymantle.com/v1",children:A})=>{const T=new X.MantleClient({appId:m,customerApiToken:l,apiUrl:g}),[s,N]=e.useState(null),[p,B]=e.useState(!0),[O,h]=e.useState(null),L=async()=>{try{B(!0);const i=await T.getCustomer();N(i)}catch(i){h(i)}finally{B(!1)}},U=async({eventId:i,eventName:R,properties:b={}})=>{await T.sendUsageEvent({eventId:i,eventName:R,properties:b})};e.useEffect(()=>{l&&L()},[l]);const v=(s==null?void 0:s.plans)||[],_=s==null?void 0:s.subscription,k=_==null?void 0:_.plan;return e.createElement(q.Provider,{value:{customer:s,subscription:_,plans:v,loading:p,error:O,client:T,pushEvent:U,isFeatureEnabled:({featureKey:i,count:R=0})=>s!=null&&s.features[i]?K({feature:s.features[i],count:R}):!1,limitForFeature:({featureKey:i})=>s!=null&&s.features[i]&&k.features[i].type==="limit"?s.features[i].value:-1,refetch:async()=>{await L()}}},A)},z=()=>{const m=e.useContext(q);if(m===void 0)throw new Error("useMantle must be used within a MantleProvider");return m};var G=function(l){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},l),e.createElement("path",{fillRule:"evenodd",d:"M15.78 5.97a.75.75 0 0 1 0 1.06l-6.5 6.5a.75.75 0 0 1-1.06 0l-3.25-3.25a.75.75 0 1 1 1.06-1.06l2.72 2.72 5.97-5.97a.75.75 0 0 1 1.06 0Z"}))};G.displayName="CheckIcon";var F=function(l){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},l),e.createElement("path",{d:"M10.75 6.75a.75.75 0 0 0-1.5 0v2.5h-2.5a.75.75 0 0 0 0 1.5h2.5v2.5a.75.75 0 0 0 1.5 0v-2.5h2.5a.75.75 0 0 0 0-1.5h-2.5v-2.5Z"}))};F.displayName="PlusIcon";const E={BACK:"Back",CURRENCY_SYMBOL:"$",CURRENT_PLAN:"Current plan",CUSTOM_PLANS:"Custom plans",CUSTOM_PLANS_DESCRIPTION:"Plans tailored to your specific needs",FREE_TRIAL_LENGTH:"{{ trialDays }}-day free trial",MONTH:"month",MONTH_SHORT:"mo",MONTHLY:"Monthly",MOST_POPULAR:"Most popular",PER:"/",PLANS:"Plans",SELECT_PLAN:"Select plan",SUBSCRIBE_SUCCESS_TITLE:"Subscription successful",SUBSCRIBE_SUCCESS_BODY:"Thanks for subscribing to our app!",YEAR:"year",YEAR_SHORT:"yr",YEARLY:"Yearly"},Y={EVERY_30_DAYS:"EVERY_30_DAYS",ANNUAL:"ANNUAL"},Z=({customer:m,plans:l,onSubscribe:g,backUrl:A="",showRecommendedBadge:T=!0,customFieldCta:s=null,customFieldPlanRecommended:N="Recommended",showCurrencySymbol:p=!0,showPlanIntervalToggle:B=!0,showTrialDaysAsFeature:O=!0,useShortFormPlanIntervals:h=!0,pageWidth:L="default",showCustomPlans:U=!0})=>{const v=m==null?void 0:m.subscription,_=new URLSearchParams(window.location.search),k=l.some(a=>a.interval===Y.ANNUAL)&&l.some(a=>a.interval===Y.EVERY_30_DAYS),i=l.find(a=>a.id===(v==null?void 0:v.plan.id)),[R,b]=e.useState(i?i.interval:k?Y.ANNUAL:Y.EVERY_30_DAYS),M=l.filter(a=>a.availability!=="customerTag"&&a.availability!=="customer"),P=B&&k?M.filter(a=>a.interval===R):M,C=U?l.filter(a=>a.availability==="customerTag"||a.availability==="customer"):[],[y,V]=e.useState(_.get("subscribed")==="true"),H=(a=P.length)=>a%4===0?{xs:6,sm:6,md:2,lg:3,xl:3}:a%3===0?{xs:6,sm:6,md:2,lg:4,xl:4}:a%2===0?{xs:6,sm:6,md:3,lg:6,xl:6}:a===1?{xs:6,sm:6,md:6,lg:12,xl:12}:{xs:6,sm:6,md:2,lg:4,xl:4},I=({plan:a,discount:n})=>{const c=a.customFields&&a.customFields[N];return e.createElement(t.BlockStack,null,e.createElement(t.InlineStack,{align:"space-between",gap:"100"},e.createElement(t.Text,{variant:"bodyLg"},a.name),c&&T&&e.createElement(t.Badge,{tone:"success"},E.MOST_POPULAR)),a.description&&e.createElement(t.Text,{tone:"subdued"},a.description))},D=({plan:a,discount:n})=>e.createElement(t.BlockStack,{gap:"100"},O&&a.trialDays!==0&&e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:G,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},E.FREE_TRIAL_LENGTH.replace("{{ trialDays }}",a.trialDays))),a.featuresOrder.map((c,o)=>{const u=a.features[c];if(u.type!=="boolean"||u.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${o}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:G,tone:"positive"})),u.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},u.name):e.createElement(t.Text,{tone:"subdued"},u.value," ",u.name))})),w=({plan:a,discount:n})=>e.createElement(t.BlockStack,{gap:"100"},n?e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},p&&E.CURRENCY_SYMBOL,n.discountedAmount),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},a.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},E.PER," ",a.interval===Y.ANNUAL?h?E.YEAR_SHORT:E.YEAR:h?E.MONTH_SHORT:E.MONTH)):e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},p&&E.CURRENCY_SYMBOL,a.amount),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},E.PER," ",a.interval===Y.ANNUAL?h?E.YEAR_SHORT:E.YEAR:h?E.MONTH_SHORT:E.MONTH)),a.usageCharges.length>0&&e.createElement(t.BlockStack,null,a.usageCharges.map((c,o)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${o}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:F,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},c.terms))))),r=({plan:a,discount:n})=>{const c=s&&a.customFields[s],o=a.customFields&&a.customFields[N];return e.createElement(t.Button,{size:"large",variant:o?"primary":"secondary",onClick:()=>g({planId:a.id,discountId:n==null?void 0:n.id}),disabled:(i==null?void 0:i.id)===a.id},(i==null?void 0:i.id)===a.id?E.CURRENT_PLAN:c?a.customFields[s]:E.SELECT_PLAN)};return e.createElement(t.Page,{title:E.PLANS,backAction:A!==""?{content:E.BACK,url:A}:void 0,secondaryActions:B&&k?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:R===Y.EVERY_30_DAYS,onClick:()=>b(Y.EVERY_30_DAYS)},E.MONTHLY),e.createElement(t.Button,{pressed:R===Y.ANNUAL,onClick:()=>b(Y.ANNUAL)},E.YEARLY)):void 0,fullWidth:L==="full",narrowWidth:L==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},y&&e.createElement(t.Banner,{tone:"success",title:E.SUBSCRIBE_SUCCESS_TITLE,onDismiss:()=>{V(!1),window.history.replaceState({},document.title,window.location.pathname)}},E.SUBSCRIBE_SUCCESS_BODY),e.createElement(t.Grid,null,P.map((a,n)=>{var o;const c=((o=a.discounts)==null?void 0:o.length)>0?a.discounts.reduce((u,$)=>u.discountedAmount<$.discountedAmount?u:$):null;return e.createElement(t.Grid.Cell,{key:`plan-${n}`,columnSpan:H()},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},I({plan:a,discount:c}),w({plan:a,discount:c}),r({plan:a,discount:c}),D({plan:a,discount:c}))))})),(C==null?void 0:C.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(C==null?void 0:C.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},E.CUSTOM_PLANS)),e.createElement(t.Grid,null,C.map((a,n)=>{var o;const c=((o=a.discounts)==null?void 0:o.length)>0?a.discounts.reduce((u,$)=>u.discountedAmount<$.discountedAmount?u:$):null;return e.createElement(t.Grid.Cell,{key:`custom-plan-${n}`,columnSpan:H()},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},I({plan:a,discount:c}),w({plan:a,discount:c}),r({plan:a,discount:c}),D({plan:a,discount:c}))))})))))))},S={BACK:"Back",CURRENCY_SYMBOL:"$",CURRENT_PLAN:"Current plan",CUSTOM_PLANS:"Custom plans",CUSTOM_PLANS_DESCRIPTION:"Plans tailored to your specific needs",FREE_TRIAL_LENGTH:"{{ trialDays }}-day free trial",MONTH:"month",MONTH_SHORT:"mo",MONTHLY:"Monthly",MOST_POPULAR:"Most popular",PER:"/",PLANS:"Plans",SELECT_PLAN:"Select plan",SUBSCRIBE_SUCCESS_TITLE:"Subscription successful",SUBSCRIBE_SUCCESS_BODY:"Thanks for subscribing to our app!",YEAR:"year",YEAR_SHORT:"yr",YEARLY:"Yearly"},f={EVERY_30_DAYS:"EVERY_30_DAYS",ANNUAL:"ANNUAL"},J=({customer:m,plans:l,onSubscribe:g,backUrl:A="",showRecommendedBadge:T=!0,customFieldCta:s=null,customFieldPlanRecommended:N="Recommended",addSpacingToNonRecommendedPlans:p=!0,showCurrencySymbol:B=!0,showPlanIntervalToggle:O=!0,showTrialDaysAsFeature:h=!0,useShortFormPlanIntervals:L=!0,pageWidth:U="default",showCustomPlans:v=!0})=>{const _=m==null?void 0:m.subscription,k=new URLSearchParams(window.location.search),i=l.some(n=>n.interval===f.ANNUAL)&&l.some(n=>n.interval===f.EVERY_30_DAYS),R=l.find(n=>n.id===(_==null?void 0:_.plan.id)),[b,M]=e.useState(R?R.interval:i?f.ANNUAL:f.EVERY_30_DAYS),P=l.filter(n=>n.availability!=="customerTag"&&n.availability!=="customer"),C=O&&i?P.filter(n=>n.interval===b):P,y=v?l.filter(n=>n.availability==="customerTag"||n.availability==="customer"):[],[V,H]=e.useState(k.get("subscribed")==="true"),I=(n=C.length)=>n%4===0?{xs:6,sm:6,md:2,lg:3,xl:3}:n%3===0?{xs:6,sm:6,md:2,lg:4,xl:4}:n%2===0?{xs:6,sm:6,md:3,lg:6,xl:6}:n===1?{xs:6,sm:6,md:6,lg:12,xl:12}:{xs:6,sm:6,md:2,lg:4,xl:4},D=()=>C.length%4===0?4:C.length%3===0?3:C.length%2===0?2:C.length===1?1:4,w=n=>e.createElement(t.BlockStack,{gap:"100"},e.createElement(t.Text,{variant:"headingMd",alignment:"center"},n.name),n.description&&e.createElement(t.Text,{variant:"bodyLg",tone:"subdued",alignment:"center"},n.description)),r=n=>e.createElement(t.BlockStack,{gap:"300"},h&&n.trialDays!==0&&e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:G,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},S.FREE_TRIAL_LENGTH.replace("{{ trialDays }}",n.trialDays))),n.featuresOrder.map((c,o)=>{const u=n.features[c];if(u.type!=="boolean"||u.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${o}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:G,tone:"positive"})),u.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},u.name):e.createElement(t.Text,{tone:"subdued"},u.value," ",u.name))})),a=n=>{let c=n.amount;for(const o of n.discounts)c=o.percentage?n.amount-n.amount*(o.percentage/100):n.amount-o.amount;return e.createElement(t.BlockStack,{gap:"100"},n.discounts.length>0?e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"heading3xl"},B&&S.CURRENCY_SYMBOL,c),e.createElement(t.Text,{variant:"heading3xl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},n.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},S.PER," ",n.interval===f.ANNUAL?L?S.YEAR_SHORT:S.YEAR:L?S.MONTH_SHORT:S.MONTH)):e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"heading3xl"},B&&S.CURRENCY_SYMBOL,n.amount),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},S.PER," ",n.interval===f.ANNUAL?L?S.YEAR_SHORT:S.YEAR:L?S.MONTH_SHORT:S.MONTH)),n.usageCharges.length>0&&e.createElement(t.BlockStack,null,n.usageCharges.map((o,u)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${u}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:F,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},o.terms)))))};return e.createElement(t.Page,{title:S.PLANS,backAction:A&&A!==""?{content:S.BACK,url:A}:void 0,secondaryActions:O&&i?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:b===f.EVERY_30_DAYS,onClick:()=>M(f.EVERY_30_DAYS)},S.MONTHLY),e.createElement(t.Button,{pressed:b===f.ANNUAL,onClick:()=>M(f.ANNUAL)},S.YEARLY)):void 0,fullWidth:U==="full",narrowWidth:U==="narrow"},e.createElement(t.Box,{paddingBlockEnd:"800"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},V&&e.createElement(t.Banner,{tone:"success",title:S.SUBSCRIBE_SUCCESS_TITLE,onDismiss:()=>{H(!1),window.history.replaceState({},document.title,window.location.pathname)}},S.SUBSCRIBE_SUCCESS_BODY),e.createElement(t.Grid,{columns:D()},C.map((n,c)=>{const o=n.customFields&&n.customFields[N],u=s&&n.customFields[s];return e.createElement(t.Grid.Cell,{key:`plan-${c}`,columnSpan:I()},e.createElement(t.Box,{position:"relative",minHeight:"100%"},e.createElement(t.Box,{paddingBlock:!p||o?void 0:"800",minHeight:"100%"},e.createElement(t.Box,{background:o?"bg-surface":"bg-surface-secondary",borderStyle:"solid",borderColor:"border",borderWidth:"025",paddingBlock:p&&o?"1600":"800",paddingInline:"400",borderRadius:"200",minHeight:"calc(100% - calc(var(--p-space-800) * 2))"},e.createElement(t.BlockStack,{gap:"800"},e.createElement(t.BlockStack,{gap:"400"},w(n),a(n)),e.createElement(t.Button,{size:"large",variant:o?"primary":"secondary",onClick:()=>g(n)},u?n.customFields[s]:S.SELECT_PLAN),r(n),o&&T&&e.createElement(t.InlineStack,{key:`plan-feature-${c}`,align:"center",gap:"100"},e.createElement(t.Badge,{tone:"success"},S.MOST_POPULAR)))))))})),(y==null?void 0:y.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(y==null?void 0:y.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},S.CUSTOM_PLANS)),e.createElement(t.Grid,null,y.map((n,c)=>{const o=n.customFields&&n.customFields[N],u=s&&n.customFields[s];return e.createElement(t.Grid.Cell,{key:`custom-plan-${c}`,columnSpan:I(y.length)},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},w(n),a(n),e.createElement(t.Button,{size:"large",variant:o?"primary":"secondary",onClick:()=>g(n)},u?n.customFields[s]:S.SELECT_PLAN),r(n))))}))))))))},d={BACK:"Back",CURRENCY_SYMBOL:"$",CURRENT_PLAN:"Current plan",CUSTOM_PLANS:"Custom plans",CUSTOM_PLANS_DESCRIPTION:"Plans tailored to your specific needs",FEATURES:"Features on this plan",FREE_TRIAL_LENGTH:"{{ trialDays }}-day free trial",MONTH:"month",MONTH_SHORT:"mo",MONTHLY:"Monthly",MOST_POPULAR:"Most popular",PER:"/",PLANS:"Plans",SELECT_PLAN:"Select plan",SUBSCRIBE_SUCCESS_TITLE:"Subscription successful",SUBSCRIBE_SUCCESS_BODY:"Thanks for subscribing to our app!",YEAR:"year",YEAR_SHORT:"yr",YEARLY:"Yearly"},x={EVERY_30_DAYS:"EVERY_30_DAYS",ANNUAL:"ANNUAL"},Q=({customer:m,plans:l,onSubscribe:g,backUrl:A="",showRecommendedBadge:T=!0,customFieldCta:s=null,customFieldPlanRecommended:N="Recommended",showCurrencySymbol:p=!0,showPlanIntervalToggle:B=!1,showTrialDaysAsFeature:O=!0,useShortFormPlanIntervals:h=!0,pageWidth:L="default",showCustomPlans:U=!0})=>{const v=m==null?void 0:m.subscription,_=new URLSearchParams(window.location.search),k=l.some(r=>r.interval===x.ANNUAL)&&l.some(r=>r.interval===x.EVERY_30_DAYS),i=l.find(r=>r.id===(v==null?void 0:v.plan.id)),[R,b]=e.useState(i?i.interval:k?x.ANNUAL:x.EVERY_30_DAYS),M=l.filter(r=>r.availability!=="customerTag"&&r.availability!=="customer"),P=B&&k?M.filter(r=>r.interval===R):M,C=U?l.filter(r=>r.availability==="customerTag"||r.availability==="customer"):[],[y,V]=e.useState(_.get("subscribed")==="true"),H=({plan:r,discount:a})=>e.createElement(t.BlockStack,null,e.createElement(t.Text,{variant:"bodyLg"},r.name),r.description&&e.createElement(t.Text,{tone:"subdued"},r.description)),I=({plan:r,discount:a})=>e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{fontWeight:"medium"},d.FEATURES),e.createElement(t.BlockStack,{gap:"100"},O&&r.trialDays!==0&&e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:G,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},d.FREE_TRIAL_LENGTH.replace("{{ trialDays }}",r.trialDays))),r.featuresOrder.map((n,c)=>{const o=r.features[n];if(o.type!=="boolean"||o.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${c}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:G,tone:"positive"})),o.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},o.name):e.createElement(t.Text,{tone:"subdued"},o.value," ",o.name))}))),D=({plan:r,discount:a})=>e.createElement(t.BlockStack,{gap:"100"},a?e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},p&&d.CURRENCY_SYMBOL,a.discountedAmount),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},r.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},d.PER," ",r.interval===x.ANNUAL?h?d.YEAR_SHORT:d.YEAR:h?d.MONTH_SHORT:d.MONTH)):e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},p&&d.CURRENCY_SYMBOL,r.amount),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},d.PER," ",r.interval===x.ANNUAL?h?d.YEAR_SHORT:d.YEAR:h?d.MONTH_SHORT:d.MONTH)),r.usageCharges.length>0&&e.createElement(t.BlockStack,null,r.usageCharges.map((n,c)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${c}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:F,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},n.terms))))),w=({plan:r,discount:a})=>{const n=s&&r.customFields[s],c=r.customFields&&r.customFields[N];return e.createElement(t.InlineStack,{blockAlign:"center",gap:"400"},e.createElement(t.Button,{size:"large",variant:c?"primary":"secondary",onClick:()=>g({planId:r.id,discountId:a==null?void 0:a.id}),disabled:(i==null?void 0:i.id)===r.id},(i==null?void 0:i.id)===r.id?d.CURRENT_PLAN:n?r.customFields[s]:d.SELECT_PLAN),c&&T&&e.createElement(t.Box,null,e.createElement(t.Badge,{tone:"success"},d.MOST_POPULAR)))};return e.createElement(t.Page,{title:d.PLANS,backAction:A!==""?{content:d.BACK,url:A}:void 0,secondaryActions:B&&k?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:R===x.EVERY_30_DAYS,onClick:()=>b(x.EVERY_30_DAYS)},d.MONTHLY),e.createElement(t.Button,{pressed:R===x.ANNUAL,onClick:()=>b(x.ANNUAL)},d.YEARLY)):void 0,fullWidth:L==="full",narrowWidth:L==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"400"},y&&e.createElement(t.Banner,{tone:"success",title:d.SUBSCRIBE_SUCCESS_TITLE,onDismiss:()=>{V(!1),window.history.replaceState({},document.title,window.location.pathname)}},d.SUBSCRIBE_SUCCESS_BODY),P.map((r,a)=>{var c;const n=((c=r.discounts)==null?void 0:c.length)>0?r.discounts.reduce((o,u)=>o.discountedAmount<u.discountedAmount?o:u):null;return e.createElement(t.Card,{key:`plan-${a}`},e.createElement(t.Grid,null,e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},e.createElement(t.BlockStack,{gap:"400"},e.createElement(t.BlockStack,{gap:"200"},H({plan:r,discount:n}),D({plan:r,discount:n})),e.createElement(t.Box,null,w({plan:r,discount:n})))),e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},I({plan:r,discount:n}))))}),(C==null?void 0:C.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(C==null?void 0:C.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},d.CUSTOM_PLANS)),e.createElement(t.Grid,null,C.map((r,a)=>{var c;const n=((c=r.discounts)==null?void 0:c.length)>0?r.discounts.reduce((o,u)=>o.discountedAmount<u.discountedAmount?o:u):null;return e.createElement(t.Grid.Cell,{key:`custom-plan-${a}`,columnSpan:columnSpan()},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},H({plan:r,discount:n}),D({plan:r,discount:n}),w({plan:r,discount:n}),I({plan:r,discount:n}))))})))))))};exports.HighlightedCard=J;exports.HorizontalCards=Z;exports.MantleProvider=j;exports.VerticalCards=Q;exports.useMantle=z;
