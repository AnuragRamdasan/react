"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("react"),t=require("@shopify/polaris");class W{constructor({appId:l,apiKey:C,customerApiToken:d,apiUrl:R="https://appapi.heymantle.com/v1"}){if(!l)throw new Error("MantleClient appId is required");if(typeof window<"u"&&C)throw new Error("MantleClient apiKey should never be used in the browser");if(!C&&!d)throw new Error("MantleClient one of apiKey or customerApiToken is required");this.appId=l,this.apiKey=C,this.customerApiToken=d,this.apiUrl=R}async mantleRequest({path:l,method:C="GET",body:d}){try{return await(await fetch(`${this.apiUrl}${l.startsWith("/")?"":"/"}${l}`,{method:C,headers:{"Content-Type":"application/json",Accept:"application/json","X-Mantle-App-Id":this.appId,...this.apiKey?{"X-Mantle-App-Api-Key":this.apiKey}:{},...this.customerApiToken?{"X-Mantle-Customer-Api-Token":this.customerApiToken}:{}},...d&&{body:JSON.stringify(d)}})).json()}catch(R){throw console.error(`[mantleRequest] ${l} error: ${R.message}`),R}}async identify({platformId:l,myshopifyDomain:C,platform:d="shopify",accessToken:R,name:i,email:B,customFields:_}){return await this.mantleRequest({path:"identify",method:"POST",body:{platformId:l,myshopifyDomain:C,platform:d,accessToken:R,name:i,email:B,customFields:_}})}async getCustomer(){return(await this.mantleRequest({path:"customer"})).customer}async subscribe({planId:l,discountId:C,returnUrl:d}){return await this.mantleRequest({path:"subscriptions",method:"POST",body:{planId:l,discountId:C,returnUrl:d}})}async cancelSubscription(){return await this.mantleRequest({path:"subscriptions",method:"DELETE"})}async updateSubscription({id:l,cappedAmount:C}){return await this.mantleRequest({path:"subscriptions",method:"PUT",body:{id:l,cappedAmount:C}})}async sendUsageEvent({eventId:l,eventName:C,customerId:d,properties:R={}}){return await this.mantleRequest({path:"usage_events",method:"POST",body:{eventId:l,eventName:C,...d?{customerId:d}:{},properties:R}})}async sendUsageEvents({events:l}){return await this.mantleRequest({path:"usage_events",method:"POST",body:{events:l}})}}var X={MantleClient:W};const q=e.createContext(),K=({feature:u,count:l=0})=>(u==null?void 0:u.type)==="boolean"?u.value:(u==null?void 0:u.type)==="limit"?l<u.value||u.value===-1:!1,j=({appId:u,customerApiToken:l,apiUrl:C="https://appapi.heymantle.com/v1",children:d})=>{const R=new X.MantleClient({appId:u,customerApiToken:l,apiUrl:C}),[i,B]=e.useState(null),[_,v]=e.useState(!0),[M,p]=e.useState(null),L=async()=>{try{v(!0);const E=await R.getCustomer();B(E)}catch(E){p(E)}finally{v(!1)}},I=async({eventId:E,eventName:h,properties:Y={}})=>{await R.sendUsageEvent({eventId:E,eventName:h,properties:Y})},k=async({planId:E,discountId:h,returnUrl:Y})=>await R.subscribe({planId:E,discountId:h,returnUrl:Y}),U=async()=>await R.cancelSubscription();e.useEffect(()=>{l&&L()},[l]);const b=(i==null?void 0:i.plans)||[],m=i==null?void 0:i.subscription,y=m==null?void 0:m.plan;return e.createElement(q.Provider,{value:{customer:i,subscription:m,plans:b,loading:_,error:M,client:R,pushEvent:I,subscribe:k,cancelSubscription:U,isFeatureEnabled:({featureKey:E,count:h=0})=>i!=null&&i.features[E]?K({feature:i.features[E],count:h}):!1,limitForFeature:({featureKey:E})=>i!=null&&i.features[E]&&y.features[E].type==="limit"?i.features[E].value:-1,refetch:async()=>{await L()}}},d)},z=()=>{const u=e.useContext(q);if(u===void 0)throw new Error("useMantle must be used within a MantleProvider");return u};var G=function(l){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},l),e.createElement("path",{fillRule:"evenodd",d:"M15.78 5.97a.75.75 0 0 1 0 1.06l-6.5 6.5a.75.75 0 0 1-1.06 0l-3.25-3.25a.75.75 0 1 1 1.06-1.06l2.72 2.72 5.97-5.97a.75.75 0 0 1 1.06 0Z"}))};G.displayName="CheckIcon";var F=function(l){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},l),e.createElement("path",{d:"M10.75 6.75a.75.75 0 0 0-1.5 0v2.5h-2.5a.75.75 0 0 0 0 1.5h2.5v2.5a.75.75 0 0 0 1.5 0v-2.5h2.5a.75.75 0 0 0 0-1.5h-2.5v-2.5Z"}))};F.displayName="PlusIcon";const g={BACK:"Back",CURRENCY_SYMBOL:"$",CURRENT_PLAN:"Current plan",CUSTOM_PLANS:"Custom plans",CUSTOM_PLANS_DESCRIPTION:"Plans tailored to your specific needs",FREE_TRIAL_LENGTH:"{{ trialDays }}-day free trial",MONTH:"month",MONTH_SHORT:"mo",MONTHLY:"Monthly",MOST_POPULAR:"Most popular",PER:"/",PLANS:"Plans",SELECT_PLAN:"Select plan",SUBSCRIBE_SUCCESS_TITLE:"Subscription successful",SUBSCRIBE_SUCCESS_BODY:"Thanks for subscribing to our app!",YEAR:"year",YEAR_SHORT:"yr",YEARLY:"Yearly"},f={EVERY_30_DAYS:"EVERY_30_DAYS",ANNUAL:"ANNUAL"},Z=({customer:u,plans:l,onSubscribe:C,backUrl:d="",showRecommendedBadge:R=!0,customFieldCta:i=null,customFieldPlanRecommended:B="Recommended",showCurrencySymbol:_=!0,showPlanIntervalToggle:v=!0,showTrialDaysAsFeature:M=!0,useShortFormPlanIntervals:p=!0,pageWidth:L="default",showCustomPlans:I=!0})=>{const k=u==null?void 0:u.subscription,U=new URLSearchParams(window.location.search),b=l.some(a=>a.interval===f.ANNUAL)&&l.some(a=>a.interval===f.EVERY_30_DAYS),m=l.find(a=>a.id===(k==null?void 0:k.plan.id)),[y,E]=e.useState(m?m.interval:b?f.ANNUAL:f.EVERY_30_DAYS),h=l.filter(a=>a.availability!=="customerTag"&&a.availability!=="customer"),Y=v&&b?h.filter(a=>a.interval===y):h,T=I?l.filter(a=>a.availability==="customerTag"||a.availability==="customer"):[],[N,V]=e.useState(U.get("subscribed")==="true"),H=(a=Y.length)=>a%4===0?{xs:6,sm:6,md:2,lg:3,xl:3}:a%3===0?{xs:6,sm:6,md:2,lg:4,xl:4}:a%2===0?{xs:6,sm:6,md:3,lg:6,xl:6}:a===1?{xs:6,sm:6,md:6,lg:12,xl:12}:{xs:6,sm:6,md:2,lg:4,xl:4},w=({plan:a,discount:n})=>{const c=a.customFields&&a.customFields[B];return e.createElement(t.BlockStack,null,e.createElement(t.InlineStack,{align:"space-between",gap:"100"},e.createElement(t.Text,{variant:"bodyLg"},a.name),c&&R&&e.createElement(t.Badge,{tone:"success"},g.MOST_POPULAR)),a.description&&e.createElement(t.Text,{tone:"subdued"},a.description))},D=({plan:a,discount:n})=>e.createElement(t.BlockStack,{gap:"100"},M&&a.trialDays!==0&&e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:G,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},g.FREE_TRIAL_LENGTH.replace("{{ trialDays }}",a.trialDays))),a.featuresOrder.map((c,o)=>{const s=a.features[c];if(s.type!=="boolean"||s.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${o}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:G,tone:"positive"})),s.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},s.name):e.createElement(t.Text,{tone:"subdued"},s.value," ",s.name))})),P=({plan:a,discount:n})=>e.createElement(t.BlockStack,{gap:"100"},n?e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},_&&g.CURRENCY_SYMBOL,n.discountedAmount),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},a.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},g.PER," ",a.interval===f.ANNUAL?p?g.YEAR_SHORT:g.YEAR:p?g.MONTH_SHORT:g.MONTH)):e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},_&&g.CURRENCY_SYMBOL,a.amount),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},g.PER," ",a.interval===f.ANNUAL?p?g.YEAR_SHORT:g.YEAR:p?g.MONTH_SHORT:g.MONTH)),a.usageCharges.length>0&&e.createElement(t.BlockStack,null,a.usageCharges.map((c,o)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${o}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:F,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},c.terms))))),r=({plan:a,discount:n})=>{const c=i&&a.customFields[i],o=a.customFields&&a.customFields[B];return e.createElement(t.Button,{size:"large",variant:o?"primary":"secondary",onClick:()=>C({planId:a.id,discountId:n==null?void 0:n.id}),disabled:(m==null?void 0:m.id)===a.id},(m==null?void 0:m.id)===a.id?g.CURRENT_PLAN:c?a.customFields[i]:g.SELECT_PLAN)};return e.createElement(t.Page,{title:g.PLANS,backAction:d!==""?{content:g.BACK,url:d}:void 0,secondaryActions:v&&b?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:y===f.EVERY_30_DAYS,onClick:()=>E(f.EVERY_30_DAYS)},g.MONTHLY),e.createElement(t.Button,{pressed:y===f.ANNUAL,onClick:()=>E(f.ANNUAL)},g.YEARLY)):void 0,fullWidth:L==="full",narrowWidth:L==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},N&&e.createElement(t.Banner,{tone:"success",title:g.SUBSCRIBE_SUCCESS_TITLE,onDismiss:()=>{V(!1),window.history.replaceState({},document.title,window.location.pathname)}},g.SUBSCRIBE_SUCCESS_BODY),e.createElement(t.Grid,null,Y.map((a,n)=>{var o;const c=((o=a.discounts)==null?void 0:o.length)>0?a.discounts.reduce((s,$)=>s.discountedAmount<$.discountedAmount?s:$):null;return e.createElement(t.Grid.Cell,{key:`plan-${n}`,columnSpan:H()},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},w({plan:a,discount:c}),P({plan:a,discount:c}),r({plan:a,discount:c}),D({plan:a,discount:c}))))})),(T==null?void 0:T.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(T==null?void 0:T.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},g.CUSTOM_PLANS)),e.createElement(t.Grid,null,T.map((a,n)=>{var o;const c=((o=a.discounts)==null?void 0:o.length)>0?a.discounts.reduce((s,$)=>s.discountedAmount<$.discountedAmount?s:$):null;return e.createElement(t.Grid.Cell,{key:`custom-plan-${n}`,columnSpan:H()},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},w({plan:a,discount:c}),P({plan:a,discount:c}),r({plan:a,discount:c}),D({plan:a,discount:c}))))})))))))},A={BACK:"Back",CURRENCY_SYMBOL:"$",CURRENT_PLAN:"Current plan",CUSTOM_PLANS:"Custom plans",CUSTOM_PLANS_DESCRIPTION:"Plans tailored to your specific needs",FREE_TRIAL_LENGTH:"{{ trialDays }}-day free trial",MONTH:"month",MONTH_SHORT:"mo",MONTHLY:"Monthly",MOST_POPULAR:"Most popular",PER:"/",PLANS:"Plans",SELECT_PLAN:"Select plan",SUBSCRIBE_SUCCESS_TITLE:"Subscription successful",SUBSCRIBE_SUCCESS_BODY:"Thanks for subscribing to our app!",YEAR:"year",YEAR_SHORT:"yr",YEARLY:"Yearly"},x={EVERY_30_DAYS:"EVERY_30_DAYS",ANNUAL:"ANNUAL"},J=({customer:u,plans:l,onSubscribe:C,backUrl:d="",showRecommendedBadge:R=!0,customFieldCta:i=null,customFieldPlanRecommended:B="Recommended",addSpacingToNonRecommendedPlans:_=!0,showCurrencySymbol:v=!0,showPlanIntervalToggle:M=!0,showTrialDaysAsFeature:p=!0,useShortFormPlanIntervals:L=!0,pageWidth:I="default",showCustomPlans:k=!0})=>{const U=u==null?void 0:u.subscription,b=new URLSearchParams(window.location.search),m=l.some(n=>n.interval===x.ANNUAL)&&l.some(n=>n.interval===x.EVERY_30_DAYS),y=l.find(n=>n.id===(U==null?void 0:U.plan.id)),[E,h]=e.useState(y?y.interval:m?x.ANNUAL:x.EVERY_30_DAYS),Y=l.filter(n=>n.availability!=="customerTag"&&n.availability!=="customer"),T=M&&m?Y.filter(n=>n.interval===E):Y,N=k?l.filter(n=>n.availability==="customerTag"||n.availability==="customer"):[],[V,H]=e.useState(b.get("subscribed")==="true"),w=(n=T.length)=>n%4===0?{xs:6,sm:6,md:2,lg:3,xl:3}:n%3===0?{xs:6,sm:6,md:2,lg:4,xl:4}:n%2===0?{xs:6,sm:6,md:3,lg:6,xl:6}:n===1?{xs:6,sm:6,md:6,lg:12,xl:12}:{xs:6,sm:6,md:2,lg:4,xl:4},D=()=>T.length%4===0?4:T.length%3===0?3:T.length%2===0?2:T.length===1?1:4,P=n=>e.createElement(t.BlockStack,{gap:"100"},e.createElement(t.Text,{variant:"headingMd",alignment:"center"},n.name),n.description&&e.createElement(t.Text,{variant:"bodyLg",tone:"subdued",alignment:"center"},n.description)),r=n=>e.createElement(t.BlockStack,{gap:"300"},p&&n.trialDays!==0&&e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:G,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},A.FREE_TRIAL_LENGTH.replace("{{ trialDays }}",n.trialDays))),n.featuresOrder.map((c,o)=>{const s=n.features[c];if(s.type!=="boolean"||s.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${o}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:G,tone:"positive"})),s.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},s.name):e.createElement(t.Text,{tone:"subdued"},s.value," ",s.name))})),a=n=>{let c=n.amount;for(const o of n.discounts)c=o.percentage?n.amount-n.amount*(o.percentage/100):n.amount-o.amount;return e.createElement(t.BlockStack,{gap:"100"},n.discounts.length>0?e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"heading3xl"},v&&A.CURRENCY_SYMBOL,c),e.createElement(t.Text,{variant:"heading3xl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},n.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},A.PER," ",n.interval===x.ANNUAL?L?A.YEAR_SHORT:A.YEAR:L?A.MONTH_SHORT:A.MONTH)):e.createElement(t.InlineStack,{align:"center",blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"heading3xl"},v&&A.CURRENCY_SYMBOL,n.amount),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},A.PER," ",n.interval===x.ANNUAL?L?A.YEAR_SHORT:A.YEAR:L?A.MONTH_SHORT:A.MONTH)),n.usageCharges.length>0&&e.createElement(t.BlockStack,null,n.usageCharges.map((o,s)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${s}`,align:"center",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:F,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},o.terms)))))};return e.createElement(t.Page,{title:A.PLANS,backAction:d&&d!==""?{content:A.BACK,url:d}:void 0,secondaryActions:M&&m?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:E===x.EVERY_30_DAYS,onClick:()=>h(x.EVERY_30_DAYS)},A.MONTHLY),e.createElement(t.Button,{pressed:E===x.ANNUAL,onClick:()=>h(x.ANNUAL)},A.YEARLY)):void 0,fullWidth:I==="full",narrowWidth:I==="narrow"},e.createElement(t.Box,{paddingBlockEnd:"800"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"1000"},V&&e.createElement(t.Banner,{tone:"success",title:A.SUBSCRIBE_SUCCESS_TITLE,onDismiss:()=>{H(!1),window.history.replaceState({},document.title,window.location.pathname)}},A.SUBSCRIBE_SUCCESS_BODY),e.createElement(t.Grid,{columns:D()},T.map((n,c)=>{const o=n.customFields&&n.customFields[B],s=i&&n.customFields[i];return e.createElement(t.Grid.Cell,{key:`plan-${c}`,columnSpan:w()},e.createElement(t.Box,{position:"relative",minHeight:"100%"},e.createElement(t.Box,{paddingBlock:!_||o?void 0:"800",minHeight:"100%"},e.createElement(t.Box,{background:o?"bg-surface":"bg-surface-secondary",borderStyle:"solid",borderColor:"border",borderWidth:"025",paddingBlock:_&&o?"1600":"800",paddingInline:"400",borderRadius:"200",minHeight:"calc(100% - calc(var(--p-space-800) * 2))"},e.createElement(t.BlockStack,{gap:"800"},e.createElement(t.BlockStack,{gap:"400"},P(n),a(n)),e.createElement(t.Button,{size:"large",variant:o?"primary":"secondary",onClick:()=>C(n)},s?n.customFields[i]:A.SELECT_PLAN),r(n),o&&R&&e.createElement(t.InlineStack,{key:`plan-feature-${c}`,align:"center",gap:"100"},e.createElement(t.Badge,{tone:"success"},A.MOST_POPULAR)))))))})),(N==null?void 0:N.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(N==null?void 0:N.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},A.CUSTOM_PLANS)),e.createElement(t.Grid,null,N.map((n,c)=>{const o=n.customFields&&n.customFields[B],s=i&&n.customFields[i];return e.createElement(t.Grid.Cell,{key:`custom-plan-${c}`,columnSpan:w(N.length)},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},P(n),a(n),e.createElement(t.Button,{size:"large",variant:o?"primary":"secondary",onClick:()=>C(n)},s?n.customFields[i]:A.SELECT_PLAN),r(n))))}))))))))},S={BACK:"Back",CURRENCY_SYMBOL:"$",CURRENT_PLAN:"Current plan",CUSTOM_PLANS:"Custom plans",CUSTOM_PLANS_DESCRIPTION:"Plans tailored to your specific needs",FEATURES:"Features on this plan",FREE_TRIAL_LENGTH:"{{ trialDays }}-day free trial",MONTH:"month",MONTH_SHORT:"mo",MONTHLY:"Monthly",MOST_POPULAR:"Most popular",PER:"/",PLANS:"Plans",SELECT_PLAN:"Select plan",SUBSCRIBE_SUCCESS_TITLE:"Subscription successful",SUBSCRIBE_SUCCESS_BODY:"Thanks for subscribing to our app!",YEAR:"year",YEAR_SHORT:"yr",YEARLY:"Yearly"},O={EVERY_30_DAYS:"EVERY_30_DAYS",ANNUAL:"ANNUAL"},Q=({customer:u,plans:l,onSubscribe:C,backUrl:d="",showRecommendedBadge:R=!0,customFieldCta:i=null,customFieldPlanRecommended:B="Recommended",showCurrencySymbol:_=!0,showPlanIntervalToggle:v=!1,showTrialDaysAsFeature:M=!0,useShortFormPlanIntervals:p=!0,pageWidth:L="default",showCustomPlans:I=!0})=>{const k=u==null?void 0:u.subscription,U=new URLSearchParams(window.location.search),b=l.some(r=>r.interval===O.ANNUAL)&&l.some(r=>r.interval===O.EVERY_30_DAYS),m=l.find(r=>r.id===(k==null?void 0:k.plan.id)),[y,E]=e.useState(m?m.interval:b?O.ANNUAL:O.EVERY_30_DAYS),h=l.filter(r=>r.availability!=="customerTag"&&r.availability!=="customer"),Y=v&&b?h.filter(r=>r.interval===y):h,T=I?l.filter(r=>r.availability==="customerTag"||r.availability==="customer"):[],[N,V]=e.useState(U.get("subscribed")==="true"),H=({plan:r,discount:a})=>e.createElement(t.BlockStack,null,e.createElement(t.Text,{variant:"bodyLg"},r.name),r.description&&e.createElement(t.Text,{tone:"subdued"},r.description)),w=({plan:r,discount:a})=>e.createElement(t.BlockStack,{gap:"200"},e.createElement(t.Text,{fontWeight:"medium"},S.FEATURES),e.createElement(t.BlockStack,{gap:"100"},M&&r.trialDays!==0&&e.createElement(t.InlineStack,{align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:G,tone:"positive"})),e.createElement(t.Text,{tone:"subdued"},S.FREE_TRIAL_LENGTH.replace("{{ trialDays }}",r.trialDays))),r.featuresOrder.map((n,c)=>{const o=r.features[n];if(o.type!=="boolean"||o.value===!0)return e.createElement(t.InlineStack,{key:`plan-feature-${c}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:G,tone:"positive"})),o.type==="boolean"?e.createElement(t.Text,{tone:"subdued"},o.name):e.createElement(t.Text,{tone:"subdued"},o.value," ",o.name))}))),D=({plan:r,discount:a})=>e.createElement(t.BlockStack,{gap:"100"},a?e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{variant:"headingXl"},_&&S.CURRENCY_SYMBOL,a.discountedAmount),e.createElement(t.Text,{variant:"headingXl",tone:"subdued",fontWeight:"medium",textDecorationLine:"line-through"},r.amount),e.createElement(t.Text,{variant:"bodyLg",tone:"subdued"},S.PER," ",r.interval===O.ANNUAL?p?S.YEAR_SHORT:S.YEAR:p?S.MONTH_SHORT:S.MONTH)):e.createElement(t.InlineStack,{blockAlign:"center",gap:"200"},e.createElement(t.Text,{alignment:"center",variant:"headingXl"},_&&S.CURRENCY_SYMBOL,r.amount),e.createElement(t.Text,{alignment:"center",variant:"bodyLg",tone:"subdued"},S.PER," ",r.interval===O.ANNUAL?p?S.YEAR_SHORT:S.YEAR:p?S.MONTH_SHORT:S.MONTH)),r.usageCharges.length>0&&e.createElement(t.BlockStack,null,r.usageCharges.map((n,c)=>e.createElement(t.InlineStack,{key:`plan-usageCharge-${c}`,align:"start",gap:"100"},e.createElement(t.Box,null,e.createElement(t.Icon,{source:F,tone:"positive"})),e.createElement(t.Text,{variant:"bodyLg"},n.terms))))),P=({plan:r,discount:a})=>{const n=i&&r.customFields[i],c=r.customFields&&r.customFields[B];return e.createElement(t.InlineStack,{blockAlign:"center",gap:"400"},e.createElement(t.Button,{size:"large",variant:c?"primary":"secondary",onClick:()=>C({planId:r.id,discountId:a==null?void 0:a.id}),disabled:(m==null?void 0:m.id)===r.id},(m==null?void 0:m.id)===r.id?S.CURRENT_PLAN:n?r.customFields[i]:S.SELECT_PLAN),c&&R&&e.createElement(t.Box,null,e.createElement(t.Badge,{tone:"success"},S.MOST_POPULAR)))};return e.createElement(t.Page,{title:S.PLANS,backAction:d!==""?{content:S.BACK,url:d}:void 0,secondaryActions:v&&b?e.createElement(t.ButtonGroup,{variant:"segmented"},e.createElement(t.Button,{pressed:y===O.EVERY_30_DAYS,onClick:()=>E(O.EVERY_30_DAYS)},S.MONTHLY),e.createElement(t.Button,{pressed:y===O.ANNUAL,onClick:()=>E(O.ANNUAL)},S.YEARLY)):void 0,fullWidth:L==="full",narrowWidth:L==="narrow"},e.createElement(t.Layout,null,e.createElement(t.Layout.Section,null,e.createElement(t.BlockStack,{gap:"400"},N&&e.createElement(t.Banner,{tone:"success",title:S.SUBSCRIBE_SUCCESS_TITLE,onDismiss:()=>{V(!1),window.history.replaceState({},document.title,window.location.pathname)}},S.SUBSCRIBE_SUCCESS_BODY),Y.map((r,a)=>{var c;const n=((c=r.discounts)==null?void 0:c.length)>0?r.discounts.reduce((o,s)=>o.discountedAmount<s.discountedAmount?o:s):null;return e.createElement(t.Card,{key:`plan-${a}`},e.createElement(t.Grid,null,e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},e.createElement(t.BlockStack,{gap:"400"},e.createElement(t.BlockStack,{gap:"200"},H({plan:r,discount:n}),D({plan:r,discount:n})),e.createElement(t.Box,null,P({plan:r,discount:n})))),e.createElement(t.Grid.Cell,{columnSpan:{xs:6,sm:6,md:3,lg:6,xl:12}},w({plan:r,discount:n}))))}),(T==null?void 0:T.length)>0&&e.createElement(t.Divider,{borderColor:"border"}),(T==null?void 0:T.length)>0&&e.createElement(t.BlockStack,{gap:"300"},e.createElement(t.Box,{paddingInline:{xs:400,sm:0}},e.createElement(t.Text,{variant:"headingMd"},S.CUSTOM_PLANS)),e.createElement(t.Grid,null,T.map((r,a)=>{var c;const n=((c=r.discounts)==null?void 0:c.length)>0?r.discounts.reduce((o,s)=>o.discountedAmount<s.discountedAmount?o:s):null;return e.createElement(t.Grid.Cell,{key:`custom-plan-${a}`,columnSpan:columnSpan()},e.createElement(t.Card,null,e.createElement(t.BlockStack,{gap:"400"},H({plan:r,discount:n}),D({plan:r,discount:n}),P({plan:r,discount:n}),w({plan:r,discount:n}))))})))))))};exports.HighlightedCard=J;exports.HorizontalCards=Z;exports.MantleProvider=j;exports.VerticalCards=Q;exports.useMantle=z;
